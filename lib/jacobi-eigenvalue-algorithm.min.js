!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("jacobi-eigenvalue-algorithm",[],r):"object"==typeof exports?exports["jacobi-eigenvalue-algorithm"]=r():e["jacobi-eigenvalue-algorithm"]=r()}("undefined"!=typeof self?self:this,function(){return function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="/",t(t.s=0)}([function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=function(e,r,t){for(var n,o,u,i=0;i<t;i++)for(var l=0;l<t;l++)i!=l&&(void 0===n||void 0===o||Math.abs(r[i][l])>Math.abs(r[n][o]))&&(n=i,o=l);u=r[n][n]===r[o][o]?r[n][o]>0?Math.PI/4:-Math.PI/4:.5*Math.atan(2*r[n][o]/(r[n][n]-r[o][o]));var v=c(t);return v[n][n]=Math.cos(u),v[o][o]=v[n][n],v[n][o]=-Math.sin(u),v[o][n]=-v[n][o],{S:f(e,v),D:f(f(a(v),r),v)}},o=function(e,r){for(var t=e[0].length,n=i(e),o=0;o<t;o++)for(var u=0;u<t;u++)Math.abs(e[o][u])<r?n[o][u]=0:n[o][u]=e[o][u];return n},u=function(e,r){for(var t=e[0].length,n=0;n<t;n++)for(var o=0;o<t;o++)if(n!=o&&Math.abs(e[n][o])>r)return!1;return!0},f=function(e,r){for(var t=e[0].length,n=c(t),o=0;o<t;o++)for(var u=0;u<t;u++){for(var f=0,a=0;a<t;a++)f+=e[o][a]*r[a][u];n[o][u]=f}return n},a=function(e){for(var r=i(e),t=e[0].length,n=0;n<t;n++)for(var o=0;o<t;o++)r[n][o]=e[o][n];return r},i=function(e){var r=[];return e.forEach(function(e,t){r.push([]),e.forEach(function(e){r[t].push(e)})}),r},c=function(e){for(var r=[],t=0;t<e;t++){r.push([]);for(var n=0;n<e;n++)r[t][n]=n==t?1:0}return r},l=function(e,r,t){for(var f=e[0].length,l=i(e),v=c(f),d=0;d<t;d++){var s=n(v,l,f);if(v=s.S,l=s.D,u(l,r)){l=o(l,r),v=o(v,r);break}}return[v,l,a(v)]};r.default=l,e.exports=r.default}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qYWNvYmktZWlnZW52YWx1ZS1hbGdvcml0aG0vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL2phY29iaS1laWdlbnZhbHVlLWFsZ29yaXRobS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9qYWNvYmktZWlnZW52YWx1ZS1hbGdvcml0aG0vLi9zcmMvaW5kZXguanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwic2VsZiIsInRoaXMiLCJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiaXRlcmF0ZSIsIlMiLCJEIiwiZGkiLCJkaiIsImFuZ2xlIiwiaiIsInVuZGVmaW5lZCIsIk1hdGgiLCJhYnMiLCJQSSIsImF0YW4iLCJTMSIsImlkZW50aXR5IiwiY29zIiwic2luIiwibXVsdGlwbHkiLCJ0cmFuc3Bvc2UiLCJjbGVhbiIsImlucHV0IiwiZXBzaWxvbiIsImxlbmd0aCIsInJlc3VsdCIsImNsb25lIiwiaXNEaWFnb25hbCIsIkEiLCJCIiwic3VtIiwiayIsImNsbiIsImZvckVhY2giLCJyb3ciLCJwdXNoIiwiY29sIiwiaXRlcmF0aW9ucyIsIml0ciJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxpQkFBQUMsU0FBQSxpQkFBQUMsT0FDQUEsT0FBQUQsUUFBQUQsSUFDQSxtQkFBQUcsZUFBQUMsSUFDQUQsT0FBQSxpQ0FBQUgsR0FDQSxpQkFBQUMsUUFDQUEsUUFBQSwrQkFBQUQsSUFFQUQsRUFBQSwrQkFBQUMsSUFSQSxDQVNDLG9CQUFBSyxVQUFBQyxLQUFBLFdBQ0QsbUJDVEEsSUFBQUMsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBUixRQUdBLElBQUFDLEVBQUFLLEVBQUFFLEdBQUEsQ0FDQUMsRUFBQUQsRUFDQUUsR0FBQSxFQUNBVixRQUFBLElBVUEsT0FOQVcsRUFBQUgsR0FBQUksS0FBQVgsRUFBQUQsUUFBQUMsSUFBQUQsUUFBQU8sR0FHQU4sRUFBQVMsR0FBQSxFQUdBVCxFQUFBRCxRQTBEQSxPQXJEQU8sRUFBQU0sRUFBQUYsRUFHQUosRUFBQU8sRUFBQVIsRUFHQUMsRUFBQVEsRUFBQSxTQUFBZixFQUFBZ0IsRUFBQUMsR0FDQVYsRUFBQVcsRUFBQWxCLEVBQUFnQixJQUNBRyxPQUFBQyxlQUFBcEIsRUFBQWdCLEVBQUEsQ0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNWLEVBQUFnQixFQUFBLFNBQUF2QixHQUNBLG9CQUFBd0IsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQXBCLEVBQUF3QixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBcEIsRUFBQSxjQUFpRDBCLE9BQUEsS0FRakRuQixFQUFBb0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQW5CLEVBQUFtQixJQUNBLEVBQUFFLEVBQUEsT0FBQUYsRUFDQSxLQUFBRSxHQUFBLGlCQUFBRixRQUFBRyxXQUFBLE9BQUFILEVBQ0EsSUFBQUksRUFBQVgsT0FBQVksT0FBQSxNQUdBLEdBRkF4QixFQUFBZ0IsRUFBQU8sR0FDQVgsT0FBQUMsZUFBQVUsRUFBQSxXQUF5Q1QsWUFBQSxFQUFBSyxVQUN6QyxFQUFBRSxHQUFBLGlCQUFBRixFQUFBLFFBQUFNLEtBQUFOLEVBQUFuQixFQUFBUSxFQUFBZSxFQUFBRSxFQUFBLFNBQUFBLEdBQWdILE9BQUFOLEVBQUFNLElBQXFCQyxLQUFBLEtBQUFELElBQ3JJLE9BQUFGLEdBSUF2QixFQUFBMkIsRUFBQSxTQUFBakMsR0FDQSxJQUFBZ0IsRUFBQWhCLEtBQUE0QixXQUNBLFdBQTJCLE9BQUE1QixFQUFBLFNBQzNCLFdBQWlDLE9BQUFBLEdBRWpDLE9BREFNLEVBQUFRLEVBQUFFLEVBQUEsSUFBQUEsR0FDQUEsR0FJQVYsRUFBQVcsRUFBQSxTQUFBaUIsRUFBQUMsR0FBc0QsT0FBQWpCLE9BQUFrQixVQUFBQyxlQUFBMUIsS0FBQXVCLEVBQUFDLElBR3REN0IsRUFBQWdDLEVBQUEsSUFJQWhDLElBQUFpQyxFQUFBLG9HQ2xGQSxJQWtCTUMsRUFBVSxTQUFDQyxFQUFHQyxFQUFHVCxHQUd0QixJQURBLElBQUlVLEVBQVFDLEVBVVJDLEVBVEtyQyxFQUFJLEVBQUdBLEVBQUl5QixFQUFHekIsSUFDdEIsSUFBSyxJQUFJc0MsRUFBSSxFQUFHQSxFQUFJYixFQUFHYSxJQUNsQnRDLEdBQUtzQyxTQUNFQyxJQUFQSixRQUEyQkksSUFBUEgsR0FBb0JJLEtBQUtDLElBQUlQLEVBQUVsQyxHQUFHc0MsSUFBTUUsS0FBS0MsSUFBSVAsRUFBRUMsR0FBSUMsT0FDOUVELEVBQUtuQyxFQUFHb0MsRUFBS0UsR0FPSUQsRUFEaEJILEVBQUVDLEdBQUlBLEtBQVFELEVBQUVFLEdBQUlBLEdBQ25CRixFQUFFQyxHQUFJQyxHQUFNLEVBQVdJLEtBQUtFLEdBQUcsR0FDckJGLEtBQUtFLEdBQUcsRUFFZCxHQUFNRixLQUFLRyxLQUFLLEVBQUlULEVBQUVDLEdBQUlDLElBQU9GLEVBQUVDLEdBQUlBLEdBQU1ELEVBQUVFLEdBQUlBLEtBRzVELElBQUlRLEVBQUtDLEVBQVNwQixHQU1sQixPQUxBbUIsRUFBR1QsR0FBSUEsR0FBTUssS0FBS00sSUFBSVQsR0FDdEJPLEVBQUdSLEdBQUlBLEdBQU1RLEVBQUdULEdBQUlBLEdBQ3BCUyxFQUFHVCxHQUFJQyxJQUFPSSxLQUFLTyxJQUFJVixHQUN2Qk8sRUFBR1IsR0FBSUQsSUFBT1MsRUFBR1QsR0FBSUMsR0FFZCxDQUNOSCxFQUFHZSxFQUFTZixFQUFHVyxHQUNmVixFQUFHYyxFQUFTQSxFQUFTQyxFQUFVTCxHQUFLVixHQUFJVSxLQUlwQ00sRUFBUSxTQUFDQyxFQUFPQyxHQUdyQixJQUZBLElBQUkzQixFQUFJMEIsRUFBTSxHQUFHRSxPQUNiQyxFQUFTQyxFQUFNSixHQUNWbkQsRUFBSSxFQUFHQSxFQUFJeUIsRUFBR3pCLElBQ3RCLElBQUssSUFBSXNDLEVBQUksRUFBR0EsRUFBSWIsRUFBR2EsSUFDbEJFLEtBQUtDLElBQUlVLEVBQU1uRCxHQUFHc0MsSUFBTWMsRUFBU0UsRUFBT3RELEdBQUdzQyxHQUFLLEVBQy9DZ0IsRUFBT3RELEdBQUdzQyxHQUFLYSxFQUFNbkQsR0FBR3NDLEdBRy9CLE9BQU9nQixHQUdGRSxFQUFhLFNBQUNMLEVBQU9DLEdBRTFCLElBREEsSUFBSTNCLEVBQUkwQixFQUFNLEdBQUdFLE9BQ1JyRCxFQUFJLEVBQUdBLEVBQUl5QixFQUFHekIsSUFDdEIsSUFBSyxJQUFJc0MsRUFBSSxFQUFHQSxFQUFJYixFQUFHYSxJQUN0QixHQUFJdEMsR0FBS3NDLEdBQ0xFLEtBQUtDLElBQUlVLEVBQU1uRCxHQUFHc0MsSUFBTWMsRUFBUyxPQUFPLEVBRzlDLE9BQU8sR0FHRkosRUFBVyxTQUFDUyxFQUFHQyxHQUdwQixJQUZBLElBQUlqQyxFQUFJZ0MsRUFBRSxHQUFHSixPQUNUQyxFQUFTVCxFQUFTcEIsR0FDYnpCLEVBQUksRUFBR0EsRUFBSXlCLEVBQUd6QixJQUN0QixJQUFLLElBQUlzQyxFQUFJLEVBQUdBLEVBQUliLEVBQUdhLElBQUssQ0FFM0IsSUFEQSxJQUFJcUIsRUFBTSxFQUNEQyxFQUFJLEVBQUdBLEVBQUluQyxFQUFHbUMsSUFDdEJELEdBQU9GLEVBQUV6RCxHQUFHNEQsR0FBS0YsRUFBRUUsR0FBR3RCLEdBRXZCZ0IsRUFBT3RELEdBQUdzQyxHQUFLcUIsRUFHakIsT0FBT0wsR0FHRkwsRUFBWSxTQUFDRSxHQUdsQixJQUZBLElBQUlVLEVBQU1OLEVBQU1KLEdBQ1oxQixFQUFJMEIsRUFBTSxHQUFHRSxPQUNSckQsRUFBSSxFQUFHQSxFQUFJeUIsRUFBR3pCLElBQ3RCLElBQUssSUFBSXNDLEVBQUksRUFBR0EsRUFBSWIsRUFBR2EsSUFDdEJ1QixFQUFJN0QsR0FBR3NDLEdBQUthLEVBQU1iLEdBQUd0QyxHQUd2QixPQUFPNkQsR0FHRk4sRUFBUSxTQUFDSixHQUNkLElBQUlHLEVBQVMsR0FPYixPQU5BSCxFQUFNVyxRQUFRLFNBQUNDLEVBQUsvRCxHQUNuQnNELEVBQU9VLEtBQUssSUFDWkQsRUFBSUQsUUFBUSxTQUFBRyxHQUNYWCxFQUFPdEQsR0FBR2dFLEtBQUtDLE9BR1ZYLEdBR0ZULEVBQVcsU0FBQ3BCLEdBRWpCLElBREEsSUFBSTZCLEVBQVMsR0FDSnRELEVBQUksRUFBR0EsRUFBSXlCLEVBQUd6QixJQUFLLENBQzNCc0QsRUFBT1UsS0FBSyxJQUNaLElBQUssSUFBSTFCLEVBQUksRUFBR0EsRUFBSWIsRUFBR2EsSUFDdEJnQixFQUFPdEQsR0FBR3NDLEdBQU1BLEdBQUt0QyxFQUFJLEVBQUksRUFHL0IsT0FBT3NELEtBdEgwQixTQUFDSCxFQUFPQyxFQUFTYyxHQUlsRCxJQUhBLElBQUl6QyxFQUFJMEIsRUFBTSxHQUFHRSxPQUNibkIsRUFBSXFCLEVBQU1KLEdBQ1ZsQixFQUFJWSxFQUFTcEIsR0FDUnpCLEVBQUksRUFBR0EsRUFBSWtFLEVBQVlsRSxJQUFLLENBQ3BDLElBQUltRSxFQUFNbkMsRUFBUUMsRUFBR0MsRUFBR1QsR0FHeEIsR0FGQVEsRUFBSWtDLEVBQUlsQyxFQUNSQyxFQUFJaUMsRUFBSWpDLEVBQ0pzQixFQUFXdEIsRUFBR2tCLEdBQVUsQ0FDM0JsQixFQUFJZ0IsRUFBTWhCLEVBQUdrQixHQUNibkIsRUFBSWlCLEVBQU1qQixFQUFHbUIsR0FDYixPQUdGLE1BQU8sQ0FBQ25CLEVBQUdDLEVBQUdlLEVBQVVoQiIsImZpbGUiOiJqYWNvYmktZWlnZW52YWx1ZS1hbGdvcml0aG0ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJqYWNvYmktZWlnZW52YWx1ZS1hbGdvcml0aG1cIiwgW10sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiamFjb2JpLWVpZ2VudmFsdWUtYWxnb3JpdGhtXCJdID0gZmFjdG9yeSgpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImphY29iaS1laWdlbnZhbHVlLWFsZ29yaXRobVwiXSA9IGZhY3RvcnkoKTtcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbigpIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9cIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiY29uc3QgSmFjb2JpRWlnZW52YWx1ZUFsZ29yaXRobSA9IChpbnB1dCwgZXBzaWxvbiwgaXRlcmF0aW9ucykgPT4ge1xuXHRsZXQgbiA9IGlucHV0WzBdLmxlbmd0aDtcblx0bGV0IEQgPSBjbG9uZShpbnB1dCk7XG5cdGxldCBTID0gaWRlbnRpdHkobik7XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgaXRlcmF0aW9uczsgaSsrKSB7XG5cdFx0bGV0IGl0ciA9IGl0ZXJhdGUoUywgRCwgbik7XG5cdFx0UyA9IGl0ci5TO1xuXHRcdEQgPSBpdHIuRDtcblx0XHRpZiAoaXNEaWFnb25hbChELCBlcHNpbG9uKSkge1xuXHRcdFx0RCA9IGNsZWFuKEQsIGVwc2lsb24pO1xuXHRcdFx0UyA9IGNsZWFuKFMsIGVwc2lsb24pO1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBbUywgRCwgdHJhbnNwb3NlKFMpXTtcbn1cblxuXG5jb25zdCBpdGVyYXRlID0gKFMsIEQsIG4pID0+IHtcblx0Ly8gZmluZCB0aGUgaW5kaWNlcyBvZiB0aGUgbGFyZ2VzdCBvZmYtZGlhZ29uYWwgZWxlbWVudCAoaW4gbWFnbml0dWRlKSBmcm9tIERcblx0bGV0IGRpOyBsZXQgZGo7XG5cdGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XG5cdFx0Zm9yIChsZXQgaiA9IDA7IGogPCBuOyBqKyspIHtcblx0XHRcdGlmIChpID09IGopIGNvbnRpbnVlO1xuXHRcdFx0aWYgKGRpID09PSB1bmRlZmluZWQgfHwgZGogPT09IHVuZGVmaW5lZCB8fCBNYXRoLmFicyhEW2ldW2pdKSA+IE1hdGguYWJzKERbZGldW2RqXSkpIHtcblx0XHRcdFx0ZGkgPSBpOyBkaiA9IGo7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdC8vIGZpbmQgdGhlIHJvdGF0aW9uYWwgYW5nbGVcblx0bGV0IGFuZ2xlO1xuXHRpZiAoRFtkaV1bZGldID09PSBEW2RqXVtkal0pIHtcblx0XHRpZiAoRFtkaV1bZGpdID4gMCkgYW5nbGUgPSBNYXRoLlBJLzQ7XG5cdFx0ZWxzZSBhbmdsZSA9IC1NYXRoLlBJLzQ7XG5cdH0gZWxzZSB7XG5cdFx0YW5nbGUgPSAwLjUgKiBNYXRoLmF0YW4oMiAqIERbZGldW2RqXSAvIChEW2RpXVtkaV0gLSBEW2RqXVtkal0pKTtcblx0fVxuXHQvLyBjb21wdXRlIFMxXG5cdGxldCBTMSA9IGlkZW50aXR5KG4pO1xuXHRTMVtkaV1bZGldID0gTWF0aC5jb3MoYW5nbGUpO1xuXHRTMVtkal1bZGpdID0gUzFbZGldW2RpXTtcblx0UzFbZGldW2RqXSA9IC1NYXRoLnNpbihhbmdsZSk7XG5cdFMxW2RqXVtkaV0gPSAtUzFbZGldW2RqXVxuXHQvLyBzZXQgbmV3IHZhbHVlc1xuXHRyZXR1cm4ge1xuXHRcdFM6IG11bHRpcGx5KFMsIFMxKSxcblx0XHREOiBtdWx0aXBseShtdWx0aXBseSh0cmFuc3Bvc2UoUzEpLCBEKSwgUzEpXG5cdH07XG59O1xuXG5jb25zdCBjbGVhbiA9IChpbnB1dCwgZXBzaWxvbikgPT4ge1xuXHRsZXQgbiA9IGlucHV0WzBdLmxlbmd0aDtcblx0bGV0IHJlc3VsdCA9IGNsb25lKGlucHV0KTtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcblx0XHRmb3IgKGxldCBqID0gMDsgaiA8IG47IGorKykge1xuXHRcdFx0aWYgKE1hdGguYWJzKGlucHV0W2ldW2pdKSA8IGVwc2lsb24pIHJlc3VsdFtpXVtqXSA9IDA7XG5cdFx0XHRlbHNlIHJlc3VsdFtpXVtqXSA9IGlucHV0W2ldW2pdO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufVxuXG5jb25zdCBpc0RpYWdvbmFsID0gKGlucHV0LCBlcHNpbG9uKSA9PiB7XG5cdGxldCBuID0gaW5wdXRbMF0ubGVuZ3RoO1xuXHRmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xuXHRcdGZvciAobGV0IGogPSAwOyBqIDwgbjsgaisrKSB7XG5cdFx0XHRpZiAoaSA9PSBqKSBjb250aW51ZTtcblx0XHRcdGlmIChNYXRoLmFicyhpbnB1dFtpXVtqXSkgPiBlcHNpbG9uKSByZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHR9XG5cdHJldHVybiB0cnVlO1xufVxuXG5jb25zdCBtdWx0aXBseSA9IChBLCBCKSA9PiB7XG5cdGxldCBuID0gQVswXS5sZW5ndGg7XG5cdGxldCByZXN1bHQgPSBpZGVudGl0eShuKTtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcblx0XHRmb3IgKGxldCBqID0gMDsgaiA8IG47IGorKykge1xuXHRcdFx0bGV0IHN1bSA9IDA7XG5cdFx0XHRmb3IgKGxldCBrID0gMDsgayA8IG47IGsrKykge1xuXHRcdFx0XHRzdW0gKz0gQVtpXVtrXSAqIEJba11bal1cblx0XHRcdH1cblx0XHRcdHJlc3VsdFtpXVtqXSA9IHN1bTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn1cblxuY29uc3QgdHJhbnNwb3NlID0gKGlucHV0KSA9PiB7XG5cdGxldCBjbG4gPSBjbG9uZShpbnB1dCk7XG5cdGxldCBuID0gaW5wdXRbMF0ubGVuZ3RoO1xuXHRmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xuXHRcdGZvciAobGV0IGogPSAwOyBqIDwgbjsgaisrKSB7XG5cdFx0XHRjbG5baV1bal0gPSBpbnB1dFtqXVtpXTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGNsbjtcbn1cblxuY29uc3QgY2xvbmUgPSAoaW5wdXQpID0+IHtcblx0bGV0IHJlc3VsdCA9IFtdO1xuXHRpbnB1dC5mb3JFYWNoKChyb3csIGkpID0+IHtcblx0XHRyZXN1bHQucHVzaChbXSk7XG5cdFx0cm93LmZvckVhY2goY29sID0+IHtcblx0XHRcdHJlc3VsdFtpXS5wdXNoKGNvbCk7XG5cdFx0fSk7XG5cdH0pO1xuXHRyZXR1cm4gcmVzdWx0O1xufVxuXG5jb25zdCBpZGVudGl0eSA9IChuKSA9PiB7XG5cdGxldCByZXN1bHQgPSBbXTtcblx0Zm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcblx0XHRyZXN1bHQucHVzaChbXSk7XG5cdFx0Zm9yIChsZXQgaiA9IDA7IGogPCBuOyBqKyspIHtcblx0XHRcdHJlc3VsdFtpXVtqXSA9IChqID09IGkgPyAxIDogMCk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IEphY29iaUVpZ2VudmFsdWVBbGdvcml0aG07XG4iXSwic291cmNlUm9vdCI6IiJ9
